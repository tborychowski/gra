<div class="sidebar-right">
	<h2>Locations</h2>
	<ul class="locations">
		{#each Object.entries($models.locations) as [locationId, location]}
		<li>
			<a href="#"
				on:click="goto(locationId, event)"
				class="{locationId} {locationId === $locationId ? 'active' : ''}">
				<b>{location.name}</b><br>
				{#if $getDistance(locationId) > 0}
					<small>Distance: {$getDistance(locationId)} miles</small><br>
					<small>Travel Cost: {$getTravelCost(locationId)}</small>
				{:else}
					<small>You're here!</small><br>
					<small>Cost of stay: {$livingCost}</small>
				{/if}
			</a>
		</li>
		{/each}
	</ul>
</div>


<script>
import Data from '../data';

export default {
	store: () => Data.Store,

	oncreate () {
		this.store.generatePrices();
	},

	methods: {
		goto (locationId, ev) {
			if (ev) ev.preventDefault();

			const { cash, getTravelCost } = this.store.get();
			const cost = getTravelCost(locationId);
			console.log(cost);
			if (cost > cash) return alert('You can\'t afford to travel to this location!')
			this.store.goto(locationId);
		}
	}
};
</script>
